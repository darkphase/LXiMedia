To compile ffmpeg for Windows or Mac OS X follow the steps below, note that
for Linux the libavcodec-dev, libavformat-dev, libavutil-dev and
libswscale-dev packages should be installed instead.

Mac OS X:
- Make sure XCode with yasm is installed and start a terminal.

- Extract the lame sources somewhere and cd into the source directory.

- Configure lame using:
  ./configure --enable-static CFLAGS="-mtune=generic -msse3 -mssse3 -mfpmath=sse"
  
- Run make and copy libmp3lame/.libs/libmp3lame.a to ext/ffmpeg/bin.macx.

- Extract the x264 sources somewhere and cd into the source directory.

- Configure x264 using:
  ./configure --enable-static --disable-thread --extra-cflags="-mtune=generic -mmmx -msse -msse2 -msse3 -mssse3 -mfpmath=sse"

- Run make and copy libx264.a to ext/ffmpeg/bin.macx.

- Extract the libav sources somewhere and cd into the source directory.

- Create a directory "ext" and copy libmp3lame.a, libx264.a, x264_config.h and x264.h there
  and create a directory "ext/lame" and copy lame.h there.

- Configure libav using:
  ./configure --enable-gpl --disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --enable-swscale --enable-network --disable-debug --enable-mmx --enable-sse --enable-ssse3 --disable-amd3dnow --disable-amd3dnowext --disable-avx --disable-zlib --disable-bzlib --disable-pthreads --enable-libmp3lame --enable-libx264 --extra-cflags="-I./ext/ -mtune=generic -mmmx -msse -msse2 -msse3 -mssse3 -mfpmath=sse" --extra-ldflags="-L./ext/"

- Run make and copy the libavcodec.a, libavformat.a, libavutil.a and
  libswscale.a files to ext/ffmpeg/bin.macx.

Windows:
- Make sure MinGW (including yasm) and MSYS are installed and start a MinGW bash shell.

- Extract the lame sources somewhere and cd into the source directory.

- In the mingw installation directory; copy and rename mingw32-make.exe
  into make.exe.

- Configure lame using:
  ./configure --enable-static CFLAGS="-mtune=generic -march=i686 -mmmx -msse -msse2 -mfpmath=sse -mincoming-stack-boundary=2"
  
- Run make and copy libmp3lame.a to ext/ffmpeg/bin.win32.

- In the mingw installation directory; remove make.exe again.

- Extract the x264 sources somewhere and cd into the source directory.

- Configure x264 using:
  ./configure --enable-static --disable-thread --extra-cflags="-mtune=generic -march=i686 -mmmx -msse -msse2 -mfpmath=sse -mincoming-stack-boundary=2"

- Run mingw32-make and copy libx264.a to ext/ffmpeg/bin.win32.

- Extract the libav sources somewhere and cd into the source directory.

- Create a directory "ext" and copy libmp3lame.a, libx264.a, x264_config.h and x264.h there
  and create a directory "ext/lame" and copy lame.h there.

- Configure libav using:
  ./configure --enable-gpl --disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --enable-swscale --enable-network --disable-debug --enable-memalign-hack --enable-mmx --enable-sse --disable-amd3dnow --disable-amd3dnowext --disable-ssse3 --disable-avx --disable-zlib --disable-bzlib --disable-pthreads --enable-libmp3lame --enable-libx264 --extra-cflags="-D_ISOC99_SOURCE -D_POSIX_C_SOURCE=200112 -I./ext/ -mtune=generic -march=i686 -mmmx -msse -msse2 -mfpmath=sse -mincoming-stack-boundary=2" --extra-ldflags="-L./ext/"

- Run mingw32-make and copy the libavcodec.a, libavformat.a, libavutil.a and
  libswscale.a files to ext/ffmpeg/bin.win32.
